<link rel="import", href="../bower_components/polymer/polymer.html">
<link rel="import", href="../bower_components/core-ajax/core-ajax.html">
<link rel="import", href="./cth-barchart.html">

<polymer-element name="cth-chart">
  <template>
    <style>
      :host { 
        display: block; 
        margin: 10px 0px 5px 10px;
      };
    </style>
    <core-ajax url="test.json" auto response="{{resp}}"></core-ajax>
    <cth-barchart yValue="resourceCount" width="{{width}}" chartData="{{results}}"></cth-barchart>
  </template>
  <script>
    Polymer("cth-chart", {
      results: [{resourceCount: 5}],
      respChanged: function() {
        if(this.resp) {
          this.results = this.resp;
        }
      },
      ready: function() {
        this.width = this.clientWidth;
      },
      clientWidthChanged: function() {
        this.width = this.clientWidth;
      }
    });
  </script>
</polymer-element>
